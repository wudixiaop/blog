<!doctype html>
<html class="theme-next use-motion theme-next-mist">
<head>
  

<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />








  <link rel="stylesheet" type="text/css" href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5"/>



  
    <link href='//fonts.lug.ustc.edu.cn/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
  


<link rel="stylesheet" type="text/css" href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" />

<link rel="stylesheet" type="text/css" href="/css/main.css?v=0.4.5.2"/>




  <meta name="keywords" content="Rocky Lai, ShaderlabVS, Unity, UNet, Shaderlab" />





  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=0.4.5.2" />


<meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="心亡则忙，亡心则忘">
<meta property="og:url" content="http://blog.shuiguzi.com/index.html">
<meta property="og:site_name" content="心亡则忙，亡心则忘">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="心亡则忙，亡心则忘">
<meta name="twitter:description">


<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: 'Mist',
    sidebar: 'always'
  };
</script>



  <title> 心亡则忙，亡心则忘 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  <!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->
  



  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?3a8e2930fa3e4db2aa0fe1cb32188641";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <div class="container one-column 
   page-home 
">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">心亡则忙，亡心则忘</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">学习、思考、分享</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu ">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content"> 
  <section id="posts" class="posts-expand">
    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="/2016/03/01/Unity RSA/" itemprop="url">
                  Unity + openssl 生成的 RSA 秘钥实现可靠的简单数据加密
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2016-03-01T15:56:56+08:00" content="2016-03-01">
              2016-03-01
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Unity/" itemprop="url" rel="index">
                    <span itemprop="name">Unity</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/03/01/Unity RSA/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/03/01/Unity RSA/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <p>现实中会有很多需求，对数据加密是其中一种。我们对数据的加密方式有 <strong>对称加密</strong> 和 <strong>不对称加密</strong>。对称加密就是使用相同的秘钥和算法加密明文和解密密文。而不对称加密，就是有加密和解密使用不同秘钥的算法，其中对外公开的叫 <strong>公钥</strong>（public key），不公开的叫 <strong>密钥</strong>（private key）。本文中要提到的 RSA 算法就是一种不对称加密算法。</p>
<h3 id="RSA-介绍"><a href="#RSA-介绍" class="headerlink" title="RSA 介绍"></a>RSA 介绍</h3><p>关于 RSA, 详细介绍 <a href="http://baike.baidu.com/view/10613.htm?fromtitle=RSA&amp;fromid=210678&amp;type=syn" target="_blank" rel="external">请看这里</a>。</p>
<p>这里做个大白话来解释，RSA 是一个配有两把钥匙的“锁”。一般情况下使用公开的钥匙（public key）来把数据锁住，然后另外一个不公开的钥匙 （private key）开锁来得到数据。</p>
<h3 id="RSA-秘钥生成"><a href="#RSA-秘钥生成" class="headerlink" title="RSA 秘钥生成"></a>RSA 秘钥生成</h3><p>上面提到RSA 是不对称算法，它有 public key 和 private key，下面我们用 openssl 来生成它们。下面使用 OSX 系统上自带的 openssl 来生成秘钥。</p>
<blockquote>
<p><strong>➜  ~ openssl</strong><br><strong>OpenSSL&gt; genrsa -out rsa_private_key.pem 1024</strong><br>Generating RSA private key, 1024 bit long modulus<br>……….++++++<br>……………………++++++<br>e is 65537 (0x10001)<br><strong>OpenSSL&gt; pkcs8 -topk8 -inform PEM -in rsa_private_key.pem -outform PEM -nocrypt</strong><br>—–BEGIN PRIVATE KEY—–<br>MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAKGhqNRI8ygdZcsW<br>FofWo0+ERSJSQDIjDCrkWlDkKmQP3miYs0ARb00ik95z3IIRp0NCSmDJMRS2Gjdj<br>jNXlHNLZOw05OtH+47Hi3IGmi+dFDzPgux4KzXfs5eOXkhLfSR7XQ2ju1A5q6lAw<br>mXFR8IqEMR73EbwXZM6GHmMC0yglAgMBAAECgYAffJ2mFTwBQZDV+kyTU9XmpK7P<br>G9TTr44sQOXzQi+b5JeAKtcokPzsuuKxgEKhuAyshpp0tlzwWvVKewMxm/t8LIEq<br>O7rwk4w/9Hx5CX+gOogOc6HnjEAucUqr9qxBIsKyvt7V+PlZmytnIamnV3GA7fVV<br>O0APf1DtkU30eGnlAQJBAM2UMpOBwvBchWiYymnRtCyCf7qPGrbNb748a12Ca9Fc<br>eEqdH3FQGBSAUX2xij6exhGAHVPCIfwe9p+A2UTFMGUCQQDJRhwjZ0gnec8pjECX<br>hzaulzsu96ypXZltYaOsArP3pnrD4VzNy8aaplgwMXPBl3/sDyAQkRiLg4ExUUk1<br>ajzBAkB9EZ8fbH9ree5T7zid3k2uEoqgtjU7Z4qHAv0Su6jai1ZHloWti1vLBTIO<br>tTd012WK+hVdgqroVvIVoe8MzqadAkEAnD0RMKZGy2Xx2uWlajqqxuJcLbxSynH+<br>3Hqzq525h98yYwV4ncO2GmxP/rEUk02AHoUrNdD8BaiCS/82XgFmwQJAdCbcdxFK<br>ZUVK3+OCGretEHdedWuVPXEhfiLDpguog994jdoCMCmGviKiOURNo3QsK5DfT0+A<br>Lw307ILOc1dqcg==<br>—–END PRIVATE KEY—–<br><strong>OpenSSL&gt; rsa -in rsa_private_key.pem -pubout -out rsa_public_key.pem</strong><br>writing RSA key<br><strong>OpenSSL&gt;</strong>   </p>
</blockquote>
<p>然后 openssl 会为我们生成两个文件，分别叫做 <strong>rsa_private_key.pem</strong> 和 <strong>rsa_public_key.pem</strong>。</p>
<h3 id="与-Unity-结合"><a href="#与-Unity-结合" class="headerlink" title="与 Unity 结合"></a>与 Unity 结合</h3><p>这里，我们引入一个类叫做 <a href="https://msdn.microsoft.com/zh-cn/library/system.security.cryptography.rsacryptoserviceprovider%28v=VS.110%29.aspx" target="_blank" rel="external">RSACryptoServiceProvider</a>, 它是 .NET 提供的类。需要说明的是，它不能直接使用 openssl 生成的 pem 文件，我们需要转换 pem 到它能使用的格式，也就是 RSAParameters 类。具体算法那如下代码所示：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Security.Cryptography;</span><br><span class="line"><span class="keyword">using</span> System.Text;</span><br><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> RSAHelper</span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">string</span> <span class="title">Encript</span><span class="params">(<span class="built_in">string</span> value, <span class="built_in">string</span> pemPublicKey)</span></span><br><span class="line">    </span>&#123;</span><br><span class="line">        <span class="keyword">using</span>(RSACryptoServiceProvider rsa = <span class="keyword">new</span> RSACryptoServiceProvider())</span><br><span class="line">        &#123;</span><br><span class="line">            rsa.ImportParameters(ConvertFromPemPublicKey(pemPublicKey));</span><br><span class="line">            var encryptedBytes = rsa.Encrypt(Encoding.UTF8.GetBytes(value), <span class="literal">false</span>);</span><br><span class="line">            <span class="keyword">return</span> Convert.ToBase64String(encryptedBytes);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">string</span> <span class="title">Decrypt</span><span class="params">(<span class="built_in">string</span> encryptedData, <span class="built_in">string</span> pemPrivateKey)</span></span><br><span class="line">    </span>&#123;</span><br><span class="line">        <span class="keyword">using</span>(RSACryptoServiceProvider rsa = <span class="keyword">new</span> RSACryptoServiceProvider())</span><br><span class="line">        &#123;</span><br><span class="line">            rsa.ImportParameters(ConvertFromPemPrivateKey(pemPrivateKey));</span><br><span class="line">            var data = rsa.Decrypt(Convert.FromBase64String(encryptedData), <span class="literal">false</span>);</span><br><span class="line">            <span class="keyword">return</span> Encoding.UTF8.GetString(data, <span class="number">0</span>, data.Length);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// http://blog.csdn.net/liguo9860/article/details/40922919</span></span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> RSAParameters <span class="title">ConvertFromPemPublicKey</span><span class="params">(<span class="built_in">string</span> pemFileConent)</span>  </span><br><span class="line">    </span>&#123;  </span><br><span class="line">        pemFileConent = pemFileConent.Replace(<span class="string">"-----BEGIN PUBLIC KEY-----"</span>, <span class="string">""</span>).Replace(<span class="string">"-----END PUBLIC KEY-----"</span>, <span class="string">""</span>).Replace(<span class="string">"\n"</span>, <span class="string">""</span>).Replace(<span class="string">"\r"</span>, <span class="string">""</span>);  </span><br><span class="line">        byte[] keyData = Convert.FromBase64String(pemFileConent);  </span><br><span class="line">        <span class="keyword">bool</span> keySize1024 = (keyData.Length == <span class="number">162</span>);  </span><br><span class="line">        <span class="keyword">bool</span> keySize2048 = (keyData.Length == <span class="number">294</span>);  </span><br><span class="line">        <span class="keyword">if</span> (!(keySize1024 || keySize2048))  </span><br><span class="line">        &#123;  </span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> ArgumentException(<span class="string">"pem file content is incorrect, Only support the key size is 1024 or 2048"</span>);  </span><br><span class="line">        &#125;  </span><br><span class="line">        byte[] pemModulus = (keySize1024 ? <span class="keyword">new</span> byte[<span class="number">128</span>] : <span class="keyword">new</span> byte[<span class="number">256</span>]);  </span><br><span class="line">        var pemPublicExponent = <span class="keyword">new</span> byte[<span class="number">3</span>];  </span><br><span class="line">        Array.Copy(keyData, (keySize1024 ? <span class="number">29</span> : <span class="number">33</span>), pemModulus, <span class="number">0</span>, (keySize1024 ? <span class="number">128</span> : <span class="number">256</span>));  </span><br><span class="line">        Array.Copy(keyData, (keySize1024 ? <span class="number">159</span> : <span class="number">291</span>), pemPublicExponent, <span class="number">0</span>, <span class="number">3</span>);  </span><br><span class="line">        var para = <span class="keyword">new</span> RSAParameters &#123; Modulus = pemModulus, Exponent = pemPublicExponent &#125;;  </span><br><span class="line">        <span class="keyword">return</span> para;  </span><br><span class="line">    &#125;  </span><br><span class="line">    </span><br><span class="line">    <span class="comment">// http://blog.csdn.net/liguo9860/article/details/40922919</span></span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> RSAParameters <span class="title">ConvertFromPemPrivateKey</span><span class="params">(<span class="built_in">string</span> pemFileConent)</span></span><br><span class="line">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">string</span>.IsNullOrEmpty(pemFileConent))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> ArgumentNullException(<span class="string">"pemFileConent"</span>, <span class="string">"This arg cann't be empty."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        pemFileConent = pemFileConent.Replace(<span class="string">"-----BEGIN RSA PRIVATE KEY-----"</span>, <span class="string">""</span>).Replace(<span class="string">"-----END RSA PRIVATE KEY-----"</span>, <span class="string">""</span>).Replace(<span class="string">"\n"</span>, <span class="string">""</span>).Replace(<span class="string">"\r"</span>, <span class="string">""</span>);</span><br><span class="line">        byte[] keyData = Convert.FromBase64String(pemFileConent);</span><br><span class="line">        <span class="keyword">bool</span> keySize1024 = (keyData.Length == <span class="number">609</span> || keyData.Length == <span class="number">610</span>);</span><br><span class="line">        <span class="keyword">bool</span> keySize2048 = (keyData.Length == <span class="number">1190</span> || keyData.Length == <span class="number">1192</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!(keySize1024 || keySize2048))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> ArgumentException(<span class="string">"pem file content is incorrect, Only support the key size is 1024 or 2048"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> index = (keySize1024 ? <span class="number">11</span> : <span class="number">12</span>);</span><br><span class="line">        byte[] pemModulus = (keySize1024 ? <span class="keyword">new</span> byte[<span class="number">128</span>] : <span class="keyword">new</span> byte[<span class="number">256</span>]);</span><br><span class="line">        Array.Copy(keyData, index, pemModulus, <span class="number">0</span>, pemModulus.Length);</span><br><span class="line"></span><br><span class="line">        index += pemModulus.Length;</span><br><span class="line">        index += <span class="number">2</span>;</span><br><span class="line">        var pemPublicExponent = <span class="keyword">new</span> byte[<span class="number">3</span>];</span><br><span class="line">        Array.Copy(keyData, index, pemPublicExponent, <span class="number">0</span>, <span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">        index += <span class="number">3</span>;</span><br><span class="line">        index += <span class="number">4</span>;</span><br><span class="line">        <span class="keyword">if</span> (keyData[index] == <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            index++;</span><br><span class="line">        &#125;</span><br><span class="line">        byte[] pemPrivateExponent = (keySize1024 ? <span class="keyword">new</span> byte[<span class="number">128</span>] : <span class="keyword">new</span> byte[<span class="number">256</span>]);</span><br><span class="line">        Array.Copy(keyData, index, pemPrivateExponent, <span class="number">0</span>, pemPrivateExponent.Length);</span><br><span class="line"></span><br><span class="line">        index += pemPrivateExponent.Length;</span><br><span class="line">        index += (keySize1024 ? ((<span class="keyword">int</span>)keyData[index + <span class="number">1</span>] == <span class="number">64</span> ? <span class="number">2</span> : <span class="number">3</span>) : ((<span class="keyword">int</span>)keyData[index + <span class="number">2</span>] == <span class="number">128</span> ? <span class="number">3</span> : <span class="number">4</span>));</span><br><span class="line">        byte[] pemPrime1 = (keySize1024 ? <span class="keyword">new</span> byte[<span class="number">64</span>] : <span class="keyword">new</span> byte[<span class="number">128</span>]);</span><br><span class="line">        Array.Copy(keyData, index, pemPrime1, <span class="number">0</span>, pemPrime1.Length);</span><br><span class="line"></span><br><span class="line">        index += pemPrime1.Length;</span><br><span class="line">        index += (keySize1024 ? ((<span class="keyword">int</span>)keyData[index + <span class="number">1</span>] == <span class="number">64</span> ? <span class="number">2</span> : <span class="number">3</span>) : ((<span class="keyword">int</span>)keyData[index + <span class="number">2</span>] == <span class="number">128</span> ? <span class="number">3</span> : <span class="number">4</span>));</span><br><span class="line">        byte[] pemPrime2 = (keySize1024 ? <span class="keyword">new</span> byte[<span class="number">64</span>] : <span class="keyword">new</span> byte[<span class="number">128</span>]);</span><br><span class="line">        Array.Copy(keyData, index, pemPrime2, <span class="number">0</span>, pemPrime2.Length);</span><br><span class="line"></span><br><span class="line">        index += pemPrime2.Length;</span><br><span class="line">        index += (keySize1024 ? ((<span class="keyword">int</span>)keyData[index + <span class="number">1</span>] == <span class="number">64</span> ? <span class="number">2</span> : <span class="number">3</span>) : ((<span class="keyword">int</span>)keyData[index + <span class="number">2</span>] == <span class="number">128</span> ? <span class="number">3</span> : <span class="number">4</span>));</span><br><span class="line">        byte[] pemExponent1 = (keySize1024 ? <span class="keyword">new</span> byte[<span class="number">64</span>] : <span class="keyword">new</span> byte[<span class="number">128</span>]);</span><br><span class="line">        Array.Copy(keyData, index, pemExponent1, <span class="number">0</span>, pemExponent1.Length);</span><br><span class="line"></span><br><span class="line">        index += pemExponent1.Length;</span><br><span class="line">        index += (keySize1024 ? ((<span class="keyword">int</span>)keyData[index + <span class="number">1</span>] == <span class="number">64</span> ? <span class="number">2</span> : <span class="number">3</span>) : ((<span class="keyword">int</span>)keyData[index + <span class="number">2</span>] == <span class="number">128</span> ? <span class="number">3</span> : <span class="number">4</span>));</span><br><span class="line">        byte[] pemExponent2 = (keySize1024 ? <span class="keyword">new</span> byte[<span class="number">64</span>] : <span class="keyword">new</span> byte[<span class="number">128</span>]);</span><br><span class="line">        Array.Copy(keyData, index, pemExponent2, <span class="number">0</span>, pemExponent2.Length);</span><br><span class="line"></span><br><span class="line">        index += pemExponent2.Length;</span><br><span class="line">        index += (keySize1024 ? ((<span class="keyword">int</span>)keyData[index + <span class="number">1</span>] == <span class="number">64</span> ? <span class="number">2</span> : <span class="number">3</span>) : ((<span class="keyword">int</span>)keyData[index + <span class="number">2</span>] == <span class="number">128</span> ? <span class="number">3</span> : <span class="number">4</span>));</span><br><span class="line">        byte[] pemCoefficient = (keySize1024 ? <span class="keyword">new</span> byte[<span class="number">64</span>] : <span class="keyword">new</span> byte[<span class="number">128</span>]);</span><br><span class="line">        Array.Copy(keyData, index, pemCoefficient, <span class="number">0</span>, pemCoefficient.Length);</span><br><span class="line"></span><br><span class="line">        var para = <span class="keyword">new</span> RSAParameters</span><br><span class="line">            &#123;</span><br><span class="line">                Modulus = pemModulus,</span><br><span class="line">                Exponent = pemPublicExponent,</span><br><span class="line">                D = pemPrivateExponent,</span><br><span class="line">                P = pemPrime1,</span><br><span class="line">                Q = pemPrime2,</span><br><span class="line">                DP = pemExponent1,</span><br><span class="line">                DQ = pemExponent2,</span><br><span class="line">                InverseQ = pemCoefficient</span><br><span class="line">            &#125;;</span><br><span class="line">        <span class="keyword">return</span> para;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后我们可以直接调用 <code>RSAHelper.Encript</code> 来加密数据，<code>RSAHelper.Decrypt</code> 解密数据。如下面代码，<code>Encode()</code> 加密 <code>Hello Rocky</code> 字符串，然后 <code>Decode()</code> 解决加密后的字符串。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="keyword">using</span> UnityEngine.UI;</span><br><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Sample</span> : <span class="title">MonoBehaviour</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Text output;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">string</span> publicKey = <span class="string">@"-----BEGIN PUBLIC KEY-----</span><br><span class="line">MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCzVBO/HUhgU4cIRS2UE255r2uG</span><br><span class="line">EaVuPAxrANab5z7rv/hUm1t1TW9G6qaLvXraUS2c6m4PW+VVY8j/fViIy9XLhd2I</span><br><span class="line">dYsbuTNyV6gQVnA4tdMdnJdrvfzaXiIoPzP3u9Ll8LEQSW2iiludxwBlVz/VdCiA</span><br><span class="line">EYBMuYmrmSHsan5ObQIDAQAB</span><br><span class="line">-----END PUBLIC KEY-----"</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">string</span> privateKey = <span class="string">@"-----BEGIN RSA PRIVATE KEY-----</span><br><span class="line">MIICXQIBAAKBgQCzVBO/HUhgU4cIRS2UE255r2uGEaVuPAxrANab5z7rv/hUm1t1</span><br><span class="line">TW9G6qaLvXraUS2c6m4PW+VVY8j/fViIy9XLhd2IdYsbuTNyV6gQVnA4tdMdnJdr</span><br><span class="line">vfzaXiIoPzP3u9Ll8LEQSW2iiludxwBlVz/VdCiAEYBMuYmrmSHsan5ObQIDAQAB</span><br><span class="line">AoGBAIHSy1zfQSdjMO2ez0lU6/SyN0BfBAmS9VZ9y+AgACBB4PC3a/W28mk/tQST</span><br><span class="line">Tx5ACKqB2N3LpHI2BCxaPT8DeilfjaUibpOqXJ918+oXmOEpEBpEz2FzkzZWeUOo</span><br><span class="line">8bkDiuEE1RyzQEQExxCbiLQFCpX0NNIpccrTYJ3wRZfroojNAkEA4Pd9xxscmxQM</span><br><span class="line">s4aQgE+/paQWR//B2JQjhsxvYfLhrMUKgWMWpfm5EfhG3AlIE/N7iZADPLZ+2JMG</span><br><span class="line">2ljnE3VdzwJBAMwQ6DJpueg2Yj5+ufTVhFBIkJZXWGIZv5FWmzaycfJOafg/ToRB</span><br><span class="line">QWjU7Dr7buxQ4jgFI6eZcN8uM5pcer/ouwMCQDRCSb2O1r5PkgPCJp8n52UbEPH4</span><br><span class="line">v5cIEpiltNoUCciQnTghRImZ0RwTiKJkpZG85d22zomz+xNkVBs0u7kRcpECQAfH</span><br><span class="line">NTKGuSFSwVfkeK4OXWa5/Vjdp27F0Hl3tZ7WGmXD+2IM968u1ZFrXD27S7USOC0u</span><br><span class="line">dPd0b8rx9eGSWNNryYUCQQCWbiNhKEDQ1+yauWhZwamsc2Zl/Gde0eQYrWlmoZRE</span><br><span class="line">r4w8Xlt8XVBTNBf5ljALeVtXOs0LNuWqnmy1v7wMPvnN</span><br><span class="line">-----END RSA PRIVATE KEY-----"</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Start</span>(<span class="params"></span>)</span><br><span class="line">    </span>&#123;</span><br><span class="line">        output.text = <span class="string">"Hello Rocky"</span>;</span><br><span class="line">    &#125;    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Encode</span>(<span class="params"></span>)</span><br><span class="line">    </span>&#123;</span><br><span class="line">        output.text = RSAHelper.Encript(<span class="string">"Hello Rocky"</span>, publicKey);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Decode</span>(<span class="params"></span>)</span><br><span class="line">    </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> data = RSAHelper.Decrypt(output.text.Trim(), privateKey);</span><br><span class="line">        Debug.Log(data);</span><br><span class="line">        output.text = data;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>本文的代码也可以在这里找到： <a href="https://github.com/wudixiaop/UnityRSA" target="_blank" rel="external">https://github.com/wudixiaop/UnityRSA</a>。</p>
<p>Enjoy!</p>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="/2016/02/16/UnityTips/" itemprop="url">
                  Unity Tips - 关于 Untiy 一些需要知道的技巧
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2016-02-16T22:03:00+08:00" content="2016-02-16">
              2016-02-16
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Unity/" itemprop="url" rel="index">
                    <span itemprop="name">Unity</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/02/16/UnityTips/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/02/16/UnityTips/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h2 id="Unity-Tips"><a href="#Unity-Tips" class="headerlink" title="Unity Tips"></a>Unity Tips</h2><ul>
<li><code>List&lt;T&gt;</code> 或者数组序列化的时候默认生成的名字为 Element n，如果要改变这个，只需要把 T<br>的第一个序列化的字段的数据类型设置为 <code>string</code></li>
<li>保存 Play 模式下调试出的数据：在组件的右上角点击右键，选择 <code>Copy Component</code>，然后关闭 Play<br>模式之在对应的组件右上角点击右键，选择 <code>Copy Component as Values</code>。 更多小技巧请看 <a href="https://mp.weixin.qq.com/s?__biz=MjM5NjM3NDA1Mg==&amp;mid=401777518&amp;idx=1&amp;sn=aa995d6c44866fb0f5bcc096e75969bb&amp;scene=0&amp;key=710a5d99946419d912a29c647796b42ba9c71553d849b38d45c2b41608a344d5befb72dd9cb578c745cd931a0e330ad7&amp;ascene=0&amp;uin=MTQ0NjU3MzQyNw" target="_blank" rel="external">这个链接</a>。</li>
</ul>
<h2 id="性能-Tips"><a href="#性能-Tips" class="headerlink" title="性能 Tips"></a>性能 Tips</h2><ul>
<li>用 <code>for</code> 循环代替 <code>foreach</code> 循环</li>
<li>禁止不动的物体可以用 lightmap 来烘焙阴影贴图</li>
<li>移动端，清晰度可以接受的情况选尽量用低质量的贴图</li>
<li>用原生的数组代替 <code>List&lt;T&gt;</code>能提高性能</li>
</ul>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="/2015/12/31/Hello2016/" itemprop="url">
                  Hello 2016
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-12-31T23:59:59+08:00" content="2015-12-31">
              2015-12-31
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/一点一滴/" itemprop="url" rel="index">
                    <span itemprop="name">一点一滴</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/12/31/Hello2016/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/12/31/Hello2016/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h1 id="Hello-2016"><a href="#Hello-2016" class="headerlink" title="Hello 2016~~~"></a>Hello 2016~~~</h1><h3 id="Bye-2015"><a href="#Bye-2015" class="headerlink" title="Bye 2015"></a>Bye 2015</h3>
            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="/2015/12/27/ShaderlabVSFAQ/" itemprop="url">
                  ShaderlabVS 的一些常见问题
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-12-27T21:33:08+08:00" content="2015-12-27">
              2015-12-27
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Shader/" itemprop="url" rel="index">
                    <span itemprop="name">Shader</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/12/27/ShaderlabVSFAQ/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/12/27/ShaderlabVSFAQ/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <p>谢谢朋友们这一年多来对 ShaderlabVS 插件的支持。这里整理出一些朋友给我的留言或者邮件中提到的常见问题，希望对大家有帮助。</p>
<h3 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h3><h4 id="黑色背景下文字看不清楚，如何改变字体颜色"><a href="#黑色背景下文字看不清楚，如何改变字体颜色" class="headerlink" title="黑色背景下文字看不清楚，如何改变字体颜色"></a>黑色背景下文字看不清楚，如何改变字体颜色</h4><ol>
<li>打开 VS -&gt; 工具 -&gt; 选项 -&gt; 环境 -&gt; 字体和颜色,</li>
<li>显示其设置 下拉列表中选择 文本编辑器 （如果没改过，这就是默认的）。</li>
<li>在 显示项(D) 文字下面的列表框中选择以 “Shaderlab-” 开头的项，然后改变前景色</li>
<li>改完后确定就可以了</li>
</ol>
<h4 id="插件安装碰到错误-扩展“ShaderlabVS”需要的-NET-Framework-版本没有安装。"><a href="#插件安装碰到错误-扩展“ShaderlabVS”需要的-NET-Framework-版本没有安装。" class="headerlink" title="插件安装碰到错误: `扩展“ShaderlabVS”需要的 .NET Framework 版本没有安装。"></a>插件安装碰到错误: `扩展“ShaderlabVS”需要的 .NET Framework 版本没有安装。</h4><p>尝试安装已移除 .Net Framework 依赖版本的 0.6.1。  </p>
<p>下载地址：</p>
<ul>
<li>VS2015: <a href="http://pan.baidu.com/s/1pK5GIU3">http://pan.baidu.com/s/1pK5GIU3</a></li>
<li>VS2012 / VS2013: <a href="http://pan.baidu.com/s/1pK5GIU3">http://pan.baidu.com/s/1pK5GIU3</a> </li>
</ul>
          <div class="post-more-link text-center">
            <a class="btn" href="/2015/12/27/ShaderlabVSFAQ/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="/2015/11/12/AssetBundleAndABManage_3/" itemprop="url">
                  Unity 5：使用 Asset Bundle 和 Asset Bundle Manager (3)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-11-12T16:08:22+08:00" content="2015-11-12">
              2015-11-12
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Unity/" itemprop="url" rel="index">
                    <span itemprop="name">Unity</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/11/12/AssetBundleAndABManage_3/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/11/12/AssetBundleAndABManage_3/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <p>这篇是 Unity 官方教程 <a href="http://unity3d.com/cn/learn/tutorials/topics/scripting/assetbundles-and-assetbundle-manager?playlist=17117">AssetBundles and the AssetBundle Manager</a> 的翻译， 分三部分，这是第三部分。翻译不到之处请不吝指出。非常谢谢！</p>
<p>译者注：英文太啰嗦了，但是还是坚持的把它翻译完了。因为啰嗦的好处是起码能让概念多复习几遍，更容易记得住。如果读者觉得啰嗦，可以自行执行 <strong>跳读技能</strong> 来阅读译文。</p>
<p>本文的项目连接：<a href="http://u3d.as/jyk">http://u3d.as/jyk</a></p>
<hr>

<div style='display:none'><br>###EXAMPLE 1: LOADING ASSETS<br><br><em> Enable Simulation Mode using the menu item “Assets/AssetBundles/Simulation Mode”.
</em> Open the scene “AssetBundleSample/Scenes/AssetLoader”.<br><em> Note that the scene is essentially empty and only contains a Main Camera, Directional<br> Light and “Loader” GameObject.
</em> Enter Playmode.<br>* Note that a cube has been loaded into the scene from an AssetBundle.<br><br>This scene is driven by the script “LoadAssets.cs”.<br></div>

<h3 id="示例-1：加载资源"><a href="#示例-1：加载资源" class="headerlink" title="示例 1：加载资源"></a>示例 1：加载资源</h3><ul>
<li>使用 “Asset/AssetBundles/Simulation Mode” 菜单打开模拟模式</li>
<li>打开 “AssetBundleSample/Scenes/AssetLoader” 场景</li>
<li>注意场景是个空的只有一个主摄像机，方向光和游戏对象 “Loader”</li>
<li>进入 PlayMode</li>
<li>然后会注意到一个 cube 已经从 AssetBundle 加载到场景里面了</li>
</ul>
<p>这个场景是被 “LoadAssts.cs” 脚本驱动的。</p>
<div style='display:none'><br>Open “AssetBundleSample/Scripts/LoadAssets.cs” in a script editor.<br></div>

<p>在脚本编辑器里面打开脚本 “AssetBundleSample/Scripts/LoadAssets.cs”</p>
<div style='display:none'><br>There are two public variables: public string assetBundleName; and public string assetName;<br></div>

<p>脚本里有两个公共变量： <code>public string assetBundleName;</code> 和 <code>public string assetName;</code></p>
<div style='display:none'><br><em> public string assetBundleName; holds the name of the AssetBundle to be loaded.
</em> public string assetName; holds the name of the Asset to be loaded from the loaded AssetBundle.<br></div>

<ul>
<li><strong>public string assetBundleName;</strong> 保存了要被加载的 AssetBundle 的名字</li>
<li><strong>public string assetName;</strong> 保存了要已加载的 AssetBundle 中加载的资源的名字</li>
</ul>
<div style='display:none'><br>The script comprises of a Start() function and two Coroutines, called from Start(). In Initialize(), DontDestroyOnLoad() is called, the path to the AssetBundles is set and the AssetBundle Manifest is initialized. In InstantiateGameObjectAsync() the Asset and AssetBundle name are requested using AssetBundleManager.LoadAssetAsync() and if the Asset requested is not null, it is instantiated.<br></div>
          <div class="post-more-link text-center">
            <a class="btn" href="/2015/11/12/AssetBundleAndABManage_3/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="/2015/11/11/AssetBundleAndABManage_2/" itemprop="url">
                  Unity 5：使用 Asset Bundle 和 Asset Bundle Manager (2)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-11-11T20:28:07+08:00" content="2015-11-11">
              2015-11-11
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Unity/" itemprop="url" rel="index">
                    <span itemprop="name">Unity</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/11/11/AssetBundleAndABManage_2/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/11/11/AssetBundleAndABManage_2/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <p>这篇是 Unity 官方教程 <a href="http://unity3d.com/cn/learn/tutorials/topics/scripting/assetbundles-and-assetbundle-manager?playlist=17117">AssetBundles and the AssetBundle Manager</a> 的翻译， 分三部分，这是第二部分。翻译不到之处请不吝指出。非常谢谢！</p>
<hr>

<div style='display:none'><br>##WORKING WITH ASSETBUNDLES AND THE ASSETBUNDLE MANAGER<br>###INTRODUCTION<br></div>

<h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><div style='display:none'><br>One of the key areas of effort in working with AssetBundles is the building and testing of bundles. Often, during development, the Assets themselves are changing regularly. Normally this would require regularly building AssetBundles, uploading them to a host and testing these remotely hosted AssetBundles through a network connection with the working project.<br></div>

<p>使用 AssetBundle 中一个关键的地方是编译和测试 bundles。一般情况下，资源在开发过程中是会变的。正常地，可能需要要求有规律的编译 AssetBundle, 上传到服务器和然后通过网络连接在当前项目中测试远程的 AssetBundle.</p>
<div style='display:none'><br>This section focuses on using the AssetBundle Manager when working with AssetBundles. The AssetBundle Manager provides a High-level API for a massively improved workflow compared to manipulating AssetBundles directly with the foundation Low-level API.<br></div>

<p>这节主要关注 AssetBundle Manager 使用 AssetBundle。相对利用基础的低层 API 来操作 AssetBundle, AssetBundle Manager 为太幅改进的流程提供了高层的 API。</p>
<div style='display:none'><br>###WORKING WITH ASSETBUNDLES<br><br>The steps of working with AssetBundles in the editor fall roughly into these steps: - Organizing &amp; Setting-up AssetBundles in the editor. - Building AssetBundles. - Uploading AssetBundles to external storage. - Downloading AssetBundles at run-time. - Loading objects from AssetBundles.<br></div>

<h3 id="使用-AssetBundle"><a href="#使用-AssetBundle" class="headerlink" title="使用 AssetBundle"></a>使用 AssetBundle</h3><p>在编辑器中使用 AssetBundle 的大体步骤：- 在编辑器中组织 &amp; 设置 AssetBundle。 - 编译 AssetBundle。 - 上传 AssetBundle 到外部存储 - 运行期下载 AssetBundle - 从 AssetBundle 加载对象。  </p>
<div style='display:none'><br>It is worth noting that some AssetBundles can be stored locally for immediate loading as a default setup. This is useful to protect against an install where the application cannot reach remote external storage to download desired AssetBundles. For example, the application would load default language and localization data from a local AssetBundle when the application has no access to downloadable content.<br></div>

<p>值得注意的一点，有些 AssetBundle 可以存储在本地作为即时加载的默认设置。这样对不能访问远程存储下载期望的资源的安装特别有用。比如，当不能访问可下载内容的时候，程序可以从本地的 AssetBundle 中加载默认的语言和本地化数据。</p>
<div style='display:none'><br>It is also worth noting that an AssetBundle contains platform ready Assets. The contents of an AssetBundle have been compiled and optimized for the current target platform according to the Import Settings and the Target Platform set in the Build Settings. Because of this, AssetBundles should be built for each target platform.<br></div>

<p>值得注意的是一个 AssetBundle 包括平台准备资源。AssetBundle 的内容会根据 Import Settings 里设置的当前平台和 Build Settings 里面的目标平台做编译和优化。因为这样，需要为每个平台编译 AssetBundle。</p>
<div style='display:none'><br>In the following simple scene, one legitimate way of organizing the scene into AssetBundles for the greatest versatility would be to have a base scene, which would include the ground, dunes, rock columns, tree and cactus. This scene could be allowed to include the dependent Materials, as these are fairly simple and would not likely need to be changed depending upon resolution or device. The tank model would be in an AssetBundle of it’s own, which would allow changes or updates to the player Asset. Two additional AssetBundles would be used to complete the tank GameObject. These would be the dependent Materials in one, and the dependent Texture in another. This would allow for changes and updates to the texture and material as needed with the least amount of trouble. This particular organization will also allow for alternative versions, or variants, of these Assets to be loaded from a choice of AssetBundle Variants on demand depending upon need, such as platform, location or resolution of the target device.<br></div>

<p>在接下来的简单的场景中, 为了AssetBundle 最大的用途，有个合理的组织 AssetBundle 场景内容的方式就是把草地，沙丘，岩石柱，树和仙人掌都打包到一个基础场景里面。这个基础场景可能包含依赖的材质，因为他们很简单，以后不太可能会基于分辨率或者设备而改变。坦克模型将需要一个自己的 AssetBundle, 这样允许改变或者更新玩家资源。为了实现坦克游戏对象，还需要两个额外的 AssetBundle. 一个是独立的材质资源，另外是独立的纹理资源。这将会给需要给纹理和材质的更改和更新时带来最小的麻烦。这个特别的组织方式也允许有其他版本或者基于平台、位置或者目标设备分辨率选择 AssetBundle 的变体。<br>
          <div class="post-more-link text-center">
            <a class="btn" href="/2015/11/11/AssetBundleAndABManage_2/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="/2015/11/10/AssetBundleAndABManage_1/" itemprop="url">
                  Unity 5： Asset Bundle 和 Asset Bundle Manager (1)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-11-10T16:16:56+08:00" content="2015-11-10">
              2015-11-10
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Unity/" itemprop="url" rel="index">
                    <span itemprop="name">Unity</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/11/10/AssetBundleAndABManage_1/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/11/10/AssetBundleAndABManage_1/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <p>这篇是 Unity 官方教程 <a href="http://unity3d.com/cn/learn/tutorials/topics/scripting/assetbundles-and-assetbundle-manager?playlist=17117">AssetBundles and the AssetBundle Manager</a> 的翻译， 分两部分，这是第一部分。翻译不到之处请不吝指出。非常谢谢！</p>
<hr>

<div style="display:none"><br>#~###INTRODUCTION<br><br>AssetBundles allow on demand streaming and loading of Assets from a local or remote location. With AssetBundles, Assets can be stored remotely and accessed as needed, increasing the flexibility of the project and reducing the initial application size.<br></div>

<h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><p>AssetBundle 允许按需地从本地或者远程服务器上加载资源(Asset)。通过 AssetBundle 的方式，资源可以远程存储，有需要的时候访问，这样提升了项目的灵活性和降低初始程序的大小。</p>
<div style="display:none"><br>This lesson will introduce AssetBundles and discuss how to work with them, the steps and stages of the AssetBundle workflow, how to assign Assets to an AssetBundle, how and when to use AssetBundle Variants, how to build and test AssetBundles and Variants - all in the context of using the AssetBundle Manager to simplify creating, testing and deploying AssetBundles. The final section of the lesson will cover specific examples of loading and using AssetBundles and AssetBundle Variants with simple use-cases and simple example scripts.<br></div>

<p>这篇教程将会介绍 AssetBundle 和及其应用，AssetBundle 流程的步骤和各阶段和怎么样编译和测试 AssetBundle 及其变体 - 所有的一切可以用 AssetBundle Manager 来简化创建，测试和部署 AssetBundle。教程的最后一部分将使用一些加载和使用 AssetBundle 变体的简单用例和脚本示例。</p>
<div style='display:none'><br>###SAMPLE PROJECT<br></div>

<h3 id="演示项目"><a href="#演示项目" class="headerlink" title="演示项目"></a>演示项目</h3><div style='display:none'><br>Before starting this Tutorial Article, it would be best to download the AssetBundle Manager with the AssetBundle Sample project here.<br></div>

<p>在开始教程之前，最后先下载好 AssetBundle 和 AssetBundle Manager 的<a href="http://u3d.as/jyk">示例程序</a>。</p>
<div style='display:none'><br>###WHAT IS AN ASSETBUNDLE?<br><br>AssetBundles are files created in the Unity editor during edit-time, which can be used later by a build of a project at run-time. AssetBundles can contain asset files such as models, materials, textures and scenes. AssetBundles cannot contain scripts.<br></div>

<h3 id="什么是-AssetBundle"><a href="#什么是-AssetBundle" class="headerlink" title="什么是 AssetBundle"></a>什么是 AssetBundle</h3><p>AssetBundle 是由 Unity 编辑器在编辑时期创建的，可以被编译出来的程序在运行期使用的文件。AssetBundle 可以包含模型，材质，纹理和场景文件等资源。但是 AssetBundle 不能包含脚本。</p>
<div style='display:none'><br>Specifically, an AssetBundle is a collection of assets and/or scenes from a project saved in a compact file with the purpose of being loaded separately to the built executable application. AssetBundles can be loaded on demand by a game or application built in Unity. This allows streaming and asynchronous loading of content such as models, textures, audio clips, or even entire scenes. AssetBundles can be “pre-cached” and stored locally for immediate loading when first running an application. The primary purpose of AssetBundles, however, is to stream content on demand from a remote location, to be loaded into the application as necessary. AssetBundles can contain any kind of asset type recognized by Unity, including custom binary data. The only exception is that script assets are not allowed.<br></div>

<p>明确一点说，一个 AssetBundle 就是存储项目资源和 / 或场景集合的文件，目的是为了之后在游戏或者程序中加载。<br>AssetBundle 可以被在 Unity 中编译出来的游戏或者程序按需加载。它允许传送和异步加载像模型，材质，声音剪辑，<br>甚至是整个场景。当在程序中初次运行时， AssetBundle 会被存储到本地 “预缓存” 以备以后被立即加载。Assetbundle 的主要目是为了需要的时候能从远程传送内容并加载进程序。AssetBundle 可以包含可以被 Unity 识别的任何资源类型，包括二进制文件。唯一的另外就是不允许是脚本资源。</p>
<div style='display:none'><br>There are many use-cases for AssetBundles. New content can be dynamically loaded and unloaded from an application. Post-release DLC can easily be implemented. An application’s disk footprint or size can be reduced when first deployed, with assets being loaded after installation of the application and only as the assets are needed. Platform and device specific assets can be loaded without having to download or store redundant assets for other platforms or resolutions. Localization of applications becomes easy by downloading and installing only the assets needed based on the user’s location, language or preferences. Applications can be fixed, changed or updated with new content without having to resubmit the application for approval.<br></div>

<p>AssetsBundle 有很多用处。比如新的内容可以动态地在程序中加载和释放。可以很简单实现发布后的可下载内容(DLC, Downloadable Content)。<br>程序第一次安装的的时候的大小或者磁盘占用空间会减少，资源只有安装的程序需要的时候才会被加载。平台或者设备相关的资源加载时可以不必要下载或冗余存储其他平台和方案中的资源。本地化的程序可以更容易来下载和安装基于用户位置，语言和偏好的资源。新的内容可以下修复，改变或更新，而不需要重新发布程序。</p>
<div style='display:none'><br>The detailed organization of any project’s assets into AssetBundles will be heavily dependent upon the needs of that particular project. There are, however, some basic tenets to understand about AssetBundles.<br></div>

<p>AssetBundle 内项目资源的组织严重依赖于项目的需求。但是，也有一些可以更好的理解 AssetBundle 的原则。</p>
          <div class="post-more-link text-center">
            <a class="btn" href="/2015/11/10/AssetBundleAndABManage_1/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="/2015/09/23/Xcode download/" itemprop="url">
                  远离 XCodeGhost 影响，各种 XCode 版本下载
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-09-23T16:33:00+08:00" content="2015-09-23">
              2015-09-23
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Unity/" itemprop="url" rel="index">
                    <span itemprop="name">Unity</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/09/23/Xcode download/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/09/23/Xcode download/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <p>最近 <a href="http://baike.baidu.com/link?url=2582FqWOjsj0CU1shau0JPU--sgJ-moKqnYCcDy87QwZd5jPUwyxiFRbfjmrb8tpZcN8jfSu2Iw-Vokfjn8tJK">XCodeGhost</a> 病毒闹的沸沸扬扬,<br>多款 app 受其影响。就个人觉得之所以会出现这么多从第三方下载 XCode 的情况，可能有如下几个原因引起：</p>
<ul>
<li>下载 XCode 太慢</li>
<li>需要老版本的 XCode，但是苹果官网找不到 XCode 老版本</li>
<li>习惯性从网盘等第三方下软件</li>
</ul>
<p>速度太慢的问题怎么解决相信网络上有一大推方法，这里就不多说了，下面主要列出 XCode 各个版本的下载地址（<strong>需要 apple id</strong>）:</p>
          <div class="post-more-link text-center">
            <a class="btn" href="/2015/09/23/Xcode download/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>


 </div>

        

        
      </div>

      
        
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" src="https://avatars1.githubusercontent.com/u/5707242?v=3&s=460" alt="RockyLai" itemprop="image"/>
          <p class="site-author-name" itemprop="name">RockyLai</p>
        </div>
        <p class="site-description motion-element" itemprop="description"></p>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">36</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            <a href="/categories">
              <span class="site-state-item-count">3</span>
              <span class="site-state-item-name">分类</span>
              </a>
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">12</span>
              <span class="site-state-item-name">标签</span>
              </a>
          </div>

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/wudixiaop" target="_blank">
                  <i class="fa fa-github"></i> Github
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="mailto:rockylai@shuiguzi.com" target="_blank">
                  <i class="fa fa-email"></i> Email
                </a>
              </span>
            
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
        </div>

      </section>

      

    </div>
  </aside>


      
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner"> <div class="copyright" >
  
  &copy;  2014 - 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="icon-next-heart fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">RockyLai</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>


 </div>
    </footer>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  
  
    

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"rockylaigithubio"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>
    
     


    
  
  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.5.2"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.5.2"></script>
  

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/js/motion_global.js?v=0.4.5.2" id="motion.global"></script>




  <script type="text/javascript" src="/js/nav-toggle.js?v=0.4.5.2"></script>
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  

  <script type="text/javascript">
    $(document).ready(function () {
      if (CONFIG.sidebar === 'always') {
        displaySidebar();
      }
      if (isMobile()) {
        FastClick.attach(document.body);
      }

      motionIntegrator.bootstrap();
    });
  </script>

  
  

  
  

  
  <script type="text/javascript" src="/js/lazyload.js"></script>
  <script type="text/javascript">
    $(function () {
      $("#posts").find('img').lazyload({
        placeholder: "/images/loading.gif",
        effect: "fadeIn"
      });
    });
  </script>
</body>
</html>
